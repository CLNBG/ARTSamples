<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>artdaq.task.out_stream &mdash; ART-DAQ 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="artdaq.task.timing" href="timing.html" />
    <link rel="prev" title="artdaq.task.in_stream" href="in_stream.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ART-DAQ
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="constants.html">artdaq.constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">artdaq.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_codes.html">artdaq.error_codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream_readers.html">artdaq.stream_readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream_writers.html">artdaq.stream_writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="task.html">artdaq.task</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="channel.html">artdaq.task.channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel_collection.html">artdaq.task.channel_collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="export_signals.html">artdaq.task.export_signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="in_stream.html">artdaq.task.in_stream</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">artdaq.task.out_stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="timing.html">artdaq.task.timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="triggers.html">artdaq.task.triggers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="types.html">artdaq.types</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">artdaq.utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ART-DAQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="task.html">artdaq.task</a> &raquo;</li>
      <li>artdaq.task.out_stream</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/out_stream.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-artdaq._task_modules.out_stream">
<span id="artdaq-task-out-stream"></span><h1>artdaq.task.out_stream<a class="headerlink" href="#module-artdaq._task_modules.out_stream" title="Permalink to this headline"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="artdaq._task_modules.out_stream.OutStream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">artdaq._task_modules.out_stream.</span></span><span class="sig-name descname"><span class="pre">OutStream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/artdaq/_task_modules/out_stream.html#OutStream"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#artdaq._task_modules.out_stream.OutStream" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Exposes an output data stream on a DAQ task.</p>
<p>The output data stream be used to control writing behavior and can be
used in conjunction with writer classes to write samples to an
ArtDAQ task.</p>
<dl class="py property">
<dt class="sig sig-object py" id="artdaq._task_modules.out_stream.OutStream.auto_start">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">auto_start</span></span><a class="headerlink" href="#artdaq._task_modules.out_stream.OutStream.auto_start" title="Permalink to this definition"></a></dt>
<dd><p>Specifies if the “write” method automatically starts the
stream’s owning task if you did not explicitly start it
with the DAQ Start Task method.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="artdaq._task_modules.out_stream.OutStream.regen_mode">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">regen_mode</span></span><a class="headerlink" href="#artdaq._task_modules.out_stream.OutStream.regen_mode" title="Permalink to this definition"></a></dt>
<dd><p>Specifies whether
to allow ArtDAQ to generate the same data multiple times.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="constants.html#artdaq.constants.RegenerationMode" title="artdaq.constants.RegenerationMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">artdaq.constants.RegenerationMode</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="artdaq._task_modules.out_stream.OutStream.timeout">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timeout</span></span><a class="headerlink" href="#artdaq._task_modules.out_stream.OutStream.timeout" title="Permalink to this definition"></a></dt>
<dd><p>Specifies the amount of time in seconds to wait for
the write method to write all samples. ArtDAQ performs a
timeout check only if the write method must wait before it
writes data. The write method returns an error if the time
elapses. The default timeout is 10 seconds. If you set
“timeout” to artdaq.WAIT_INFINITELY, the write method
waits indefinitely. If you set timeout to 0, the write
method tries once to write the submitted samples. If the
write method could not write all the submitted samples, it
returns an error and the number of samples successfully
written in the number of samples written per channel
output.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="artdaq._task_modules.out_stream.OutStream.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">numpy_array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/artdaq/_task_modules/out_stream.html#OutStream.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#artdaq._task_modules.out_stream.OutStream.write" title="Permalink to this definition"></a></dt>
<dd><p>Writes raw samples to the task or virtual channels you specify.</p>
<p>The number of samples per channel to write is determined using the
following equation:</p>
<dl class="simple">
<dt>number_of_samples_per_channel = math.floor(</dt><dd><dl class="simple">
<dt>numpy_array_size_in_bytes / (</dt><dd><p>number_of_channels_to_write * raw_sample_size_in_bytes))</p>
</dd>
</dl>
</dd>
</dl>
<p>Raw samples constitute the internal representation of samples in a
device, read directly from the device or buffer without scaling or
reordering. The native format of a device can be an 8-, 16-, or 32-bit
integer, signed or unsigned.</p>
<p>If you use a different integer size than the native format of the
device, one integer can contain multiple samples or one sample can
stretch across multiple integers. For example, if you use 32-bit
integers, but the device uses 8-bit samples, one integer contains up to
four samples. If you use 8-bit integers, but the device uses 16-bit
samples, a sample might require two integers. This behavior varies from
device to device. Refer to your device documentation for more
information.</p>
<p>ArtDAQ does not separate raw data into channels. It accepts data in
an interleaved or non-interleaved 1D array, depending on the raw
ordering of the device. Refer to your device documentation for more
information.</p>
<p>If the task uses on-demand timing, this method returns only after the
device generates all samples. On-demand is the default timing type if
you do not use the timing property on the task to configure a sample
timing type. If the task uses any timing type other than on-demand,
this method returns immediately and does not wait for the device to
generate all samples. Your application must determine if the task is
done to ensure that the device generated all samples.</p>
<p>Use the “auto_start” property on the stream to specify if this method
automatically starts the stream’s owning task if you did not explicitly
start it with the DAQ Start Task method.</p>
<p>Use the “timeout” property on the stream to specify the amount of
time in seconds to wait for the method to write all samples. ArtDAQ
performs a timeout check only if the method must wait before it writes
data. This method returns an error if the time elapses. The default
timeout is 10 seconds. If you set timeout to artdaq.WAIT_INFINITELY,
the method waits indefinitely. If you set timeout to 0, the method
tries once to write the submitted samples. If the method could not
write all the submitted samples, it returns an error and the number of
samples successfully written.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>numpy_array</strong> (<em>numpy.ndarray</em>) – Specifies a 1D NumPy array that
contains the raw samples to write to the task.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Specifies the actual number of samples per channel successfully
written to the buffer.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="in_stream.html" class="btn btn-neutral float-left" title="artdaq.task.in_stream" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="timing.html" class="btn btn-neutral float-right" title="artdaq.task.timing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, art.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>